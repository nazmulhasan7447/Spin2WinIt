{% extends 'frontEnd/index.html' %}
{% load static %}

{% block main_block %}
<!-- Begin Li's Breadcrumb Area -->
<div class="breadcrumb-area">
    <div class="container">
        <div class="breadcrumb-content">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li class="active">Checkout</li>
            </ul>
        </div>
    </div>
</div>
<!-- Li's Breadcrumb Area End Here -->

<!--   django message         -->
<div class="container">
    <div class="row">
        <div class="col-md-12">
            {% if messages %}
            {% for message in messages %}

            <div {% if message.tags %} class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert"
                 {% endif %}>
                <strong>{{ message }}!</strong>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            {% endfor %}
            {% endif %}
        </div>
    </div>
</div>


<!-- payment section    -->

<section id="payment__section">
    <div class="container">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <div class="content">
                    <div>
                        <h6 style="margin-bottom: 10px; opacity: .7">Available Credits: {{available_points}}</h6>
                        <h6 style="margin-bottom: 10px; opacity: .7">Neccessary Credits: {{necessary_points}}</h6>
                        <h6 style="margin-bottom: 10px; opacity: .7">Winning chance: {{winning_chance}}</h6>
                        <h6 style="margin-bottom: 15px; opacity: .7">Total payable amount: ${{payable_amount}} ($1 for 2
                            credit points)</h6>
                    </div>
                    <div id="paypal-button-container"></div>
                </div>
            </div>
            <div class="col-md-3">

                <!-- ads -->
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <!--yllx 468x60 starts &*************************************-->
                            <script type="text/javascript"
                                    src="https://udbaa.com/bnr.php?section=General&pub=444213&format=468x60&ga=g"></script>
                            <!--yllx ends here **********************************-->
                        </div>
                        <div class="col-md-12">
                            <!--yllx 468x60 starts &*************************************-->
                            <script type="text/javascript"
                                    src="https://udbaa.com/bnr.php?section=General&pub=444213&format=468x60&ga=g"></script>
                            <!--yllx ends here **********************************-->
                        </div>

                        <div class="col-md-12">
                            <!--yllx 468x60 starts &*************************************-->
                            <script type="text/javascript"
                                    src="https://udbaa.com/bnr.php?section=General&pub=444213&format=468x60&ga=g"></script>
                            <!--yllx ends here **********************************-->
                        </div>

                        <div class="col-md-12">
                            <!--yllx 468x60 starts &*************************************-->
                            <script type="text/javascript"
                                    src="https://udbaa.com/bnr.php?section=General&pub=444213&format=468x60&ga=g"></script>
                            <!--yllx ends here **********************************-->
                        </div>

                        <div class="col-md-12">
                            <!--yllx 468x60 starts &*************************************-->
                            <script type="text/javascript"
                                    src="https://udbaa.com/bnr.php?section=General&pub=444213&format=468x60&ga=g"></script>
                            <!--yllx ends here **********************************-->
                        </div>
                    </div>
                </div>
                <!-- ads ends here-->
            </div>
        </div>
    </div>
</section>


<br><br>


<div class="container">
    <div class="row">
        <div class="col-md">
            <!--            eva landing slider responsive 01-->
            <script async
                    src="https://dvypar.com/na/waWQiOjExMjE0NjQsInNpZCI6MTEzOTQyMiwid2lkIjozMzQ0NjEsInNyYyI6Mn0=eyJ.js"></script>
            <!--            eva landing slider responsive 01 ends-->
        </div>

        <div class="col-md">
            <div>
                <h5>Solve this reCaptcha and get 50 points bonus!</h5>
                <form action="{% url 'frontCheckBoxCaptchaBonus' %}" method="POST" enctype="multipart/form-data"
                      id="captcha__form_prchage_wnning_chance">
                    {% csrf_token %}
                    <div id="html_element_pr_win_chance"></div>
                    <br>
                    <input type="submit" value="Submit">
                </form>
            </div>
        </div>

        <div class="col-md">
            <!--            eva landing slider responsive 01-->
            <script async
                    src="https://dvypar.com/na/waWQiOjExMjE0NjQsInNpZCI6MTEzOTQyMiwid2lkIjozMzQ0NjEsInNyYyI6Mn0=eyJ.js"></script>
            <!--            eva landing slider responsive 01-->
        </div>
        <div class="col-md">
            <!--            eva landing slider responsive 01-->
            <script async
                    src="https://dvypar.com/na/waWQiOjExMjE0NjQsInNpZCI6MTEzOTQyMiwid2lkIjozMzQ0NjEsInNyYyI6Mn0=eyJ.js"></script>
            <!--            eva landing slider responsive 01-->
        </div>
    </div>
</div>


<!-- yllx 120x60 starts here -->
<div class="container">
    <div class="row">
        <div class="col-md-2">
            <div>
                <a href="https://yllix.com/publishers/444213" target="_blank"><img
                        src="//ylx-aff.advertica-cdn.com/pub/120x600.png"
                        style="border:none;margin:0;padding:0;vertical-align:baseline;"
                        alt="ylliX - Online Advertising Network"/></a>
            </div>
        </div>

        <div class="col-md-4">
            <div>
                <div id="container-ec5611cf27ddd923a905f8d14e217991"></div>
            </div>
        </div>

        <div class="col-md-2">
            <div>
                <!-- ylliex 120x60 -->
                <script type="text/javascript"
                        src="https://udbaa.com/bnr.php?section=General&pub=444213&format=120x600&ga=g"></script>
                <!-- yllix 120x60 ends here -->
            </div>
        </div>

        <div class="col-md-2">
            <div>
                <a href="https://yllix.com/publishers/444213" target="_blank"><img
                        src="//ylx-aff.advertica-cdn.com/pub/120x600.png"
                        style="border:none;margin:0;padding:0;vertical-align:baseline;"
                        alt="ylliX - Online Advertising Network"/></a>
            </div>
        </div>

        <div class="col-md-2">
            <div>
                <!-- ylliex 120x60 -->
                <script type="text/javascript"
                        src="https://udbaa.com/bnr.php?section=General&pub=444213&format=120x600&ga=g"></script>
                <!-- yllix 120x60 ends here -->
            </div>
        </div>

    </div>
</div>
<!-- yllx 120x60 ends here -->

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div>
                <script type="text/javascript">
                                            atOptions = {
                                                'key' : '8641aba4c7f1250ff3a115fcbcb8a5d6',
                                                'format' : 'iframe',
                                                'height' : 60,
                                                'width' : 468,
                                                'params' : {}
                                            };
                                            document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectivedisplayformats.com/8641aba4c7f1250ff3a115fcbcb8a5d6/invoke.js"></scr' + 'ipt>');



                </script>
            </div>
        </div>

        <div class="col-md-6">
            <div>
                <script type="text/javascript">
                                            atOptions = {
                                                'key' : '8641aba4c7f1250ff3a115fcbcb8a5d6',
                                                'format' : 'iframe',
                                                'height' : 60,
                                                'width' : 468,
                                                'params' : {}
                                            };
                                            document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectivedisplayformats.com/8641aba4c7f1250ff3a115fcbcb8a5d6/invoke.js"></scr' + 'ipt>');



                </script>
            </div>
        </div>
    </div>
</div>


<!-- ads section ends -->


<!-- adster 1x1 native ads-->
<script async="async" data-cfasync="false"
        src="//pl17231266.safestgatetocontent.com/ec5611cf27ddd923a905f8d14e217991/invoke.js"></script>
<!-- adster 1x1 native ads ends-->


<script type="text/javascript">

// captcha-1
      var onloadCallback = function() {


        grecaptcha.render('html_element_pr_win_chance', {
          'sitekey' : '6LeyWrMfAAAAALCToOdJC3Y5Xat2bgwCZMJLL2E2',
        });
      };


      var captcha__form_prchage_wnning_chance = document.getElementById('captcha__form_prchage_wnning_chance');
        captcha__form_prchage_wnning_chance.addEventListener("submit", function(event){

            if (grecaptcha.getResponse() === '') {
              event.preventDefault();
              alert('Please check the recaptcha');
            }
          }
        , false);

        // ends captcha-1




</script>
{% endblock %}

{% block google_mapJS %}
<!-- Google Map -->
<script src="https://maps.google.com/maps/api/js?sensor=false&amp;libraries=geometry&amp;v=3.22&amp;key=AIzaSyChs2QWiAhnzz0a4OEhzqCXwx_qA9ST_lE"></script>


{% endblock %}

{% block payment_integration_block %}
<script src="https://www.paypal.com/sdk/js?client-id=AcAWRV3bad-SO2OtqY-HdU2lO24a23hLfwJygHg5pj0Rpj0VehocsqOF4jtdqvAAZMgK525Pe0dor0lE&currency=USD"></script>

<script>
      paypal.Buttons({
        // Sets up the transaction when a payment button is clicked
        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              amount: {
                value: '{{payable_amount}}' // Can also reference a variable or function
              }
            }]
          });
        },
        // Finalize the transaction after payer approval
        onApprove: (data, actions) => {
          return actions.order.capture().then(function(orderData) {
            // Successful capture! For dev/demo purposes:
            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
            const transaction = orderData.purchase_units[0].payments.captures[0];
            //alert(`Transaction ${transaction.status}: ${transaction.id}\n\nSee console for all available details`);
            // When ready to go live, remove the alert and show a success message within this page. For example:
            //const element = document.getElementById('paypal-button-container');
            //element.innerHTML = '<h3>Thank you for your payment!</h3>';
            //actions.redirect('');

            // ajax request
            $.ajax({
                url: '/fe/pay/for/game/purchasing/chance/',
                type: 'get',
                data: {
                    paid_amount: "{{payable_amount}}",
                    purchased_chances: "{{winning_chance}}",
                    necessary_points: "{{necessary_points}}",
                    available_points: "{{available_points}}",
                    order_data: JSON.stringify(orderData, null, 2),
                },
                success: function(response){

                },
            });
            // ajax

            // Simulate a mouse click:
            window.location.href = "/fe/purchaing/winning/chance/success/message/{{request.user.username}}";

          });
        }
      }).render('#paypal-button-container');



</script>

{% endblock %}